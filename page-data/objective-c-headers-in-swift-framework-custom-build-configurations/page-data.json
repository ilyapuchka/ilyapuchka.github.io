{"componentChunkName":"component---src-templates-blog-post-js","path":"/objective-c-headers-in-swift-framework-custom-build-configurations/","result":{"data":{"site":{"siteMetadata":{"title":"Ilya Puchka","siteUrl":"https://ilya.puchka.me"}},"markdownRemark":{"id":"faf9eed4-e0f2-58cf-a074-2f6a765f769d","excerpt":"It's already 2 years of Swift and its interoperability with Objective-C as well. When app extensions were released we've got a way to share our code across…","html":"<p>It's already 2 years of Swift and its interoperability with Objective-C as well. When app extensions were released we've got a way to share our code across targets using frameworks. I used to build lots of frameworks since then, sometimes I even worked full-time just on frameworks. But as I had written almost none of Objective-C in around a year now and I've never dived deep enough in Swift and Objective-C interoperability in frameworks here is the lesson I had to learn hard this time.</p>\n<h3>Setup</h3>\n<p>Lets say you've decided to make a framework that combines all UIKit related extensions used in your app. I would say that it's a good idea because next you can include your 3rd party UI dependencies in that framework as a source code. That can improve your app launch time as it will need to load less frameworks on startup.</p>\n<p>Let's say you are using <code>UIAppearance</code> and need to support iOS 8. Then most likely you will need to use <code>static func appearanceWhenContainedInInstancesOfClasses(containerTypes: [AnyObject.Type]) -> Self</code> method. But it is only available in Swift for iOS 9. To make this method available in Swift for iOS 8 you need to use some Objective-C wrapper method.</p>\n<p><em>UIAppearance+Swift.h</em></p>\n<div class=\"gatsby-highlight\" data-language=\"objective-c\"><pre class=\"language-objective-c\"><code class=\"language-objective-c\">NS_ASSUME_NONNULL_BEGIN\n@interface UIView (UIAppearance_Swift)\n\n+ (instancetype)appearanceWhenContainedWithin:(Class&lt;UIAppearanceContainer&gt;)container;\n\n@end\nNS_ASSUME_NONNULL_END</code></pre></div>\n<p><em>UIAppearance+Swift.m</em></p>\n<div class=\"gatsby-highlight\" data-language=\"objective-c\"><pre class=\"language-objective-c\"><code class=\"language-objective-c\">@implementation UIView (UIAppearance_Swift)\n\n+ (instancetype)appearanceWhenContainedWithin:(Class&lt;UIAppearanceContainer&gt;)container\n{\n    return [self appearanceWhenContainedIn: container, nil];\n}\n\n@end</code></pre></div>\n<p>So far so good, but how do you expose this to the Swift code in the framework itself and to the application code that links to this framework?</p>\n<p>In the app target you use bridging headers to expose Objective-C code for Swift code in the same target. But framework targets do not support bridging headers. Frameworks have so called umbrella headers. Here is an example:</p>\n<div class=\"gatsby-highlight\" data-language=\"objective-c\"><pre class=\"language-objective-c\"><code class=\"language-objective-c\">#import &lt;UIKit/UIKit.h&gt;\n\n//! Project version number for UIKitExtensions.\nFOUNDATION_EXPORT double UIKitExtensionsVersionNumber;\n\n//! Project version string for UIKitExtensions.\nFOUNDATION_EXPORT const unsigned char UIKitExtensionsVersionString[];\n\n// In this header, you should import all the public headers of your framework using statements like #import &lt;UIKitExtensions/PublicHeader.h&gt;</code></pre></div>\n<p>See this comment? It might seem that that's what we need. And even <a href=\"https://developer.apple.com/library/content/documentation/Swift/Conceptual/BuildingCocoaApps/MixandMatch.html\">official interoperability guide</a> suggests so. So we import our header, just like this comment says:</p>\n<div class=\"gatsby-highlight\" data-language=\"objective-c\"><pre class=\"language-objective-c\"><code class=\"language-objective-c\">// In this header, you should import all the public headers of your framework using statements like #import &lt;UIKitExtensions/PublicHeader.h&gt;\n\n#import &lt;UIKitExtensions/UIAppearance+Swift.h&gt;</code></pre></div>\n<p>Not forgetting of course to make this header public, because by default headers are added to project scope.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 258px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/08fdfbfc10f3ccf6e1df8a23a29fa0ab/d9489/--------------2016-10-29---12-57-42.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 8.783783783783782%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAaklEQVR42mWMwQkCMRAAr2ELshN7ECvwTLzsZlcS4j9Hwgg+FHSewzBLOB9pviJbIoQVt4yo4v7Azam1Mufkl1LKu7Ns9H3/+OV6OuC3C6pGShFVIYRIEiUlIZsxxvgbPlsj3jdkE3r/Dl82k5aD//Rm0gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"              2016 10 29   12 57 42\"\n        title=\"\"\n        src=\"/static/08fdfbfc10f3ccf6e1df8a23a29fa0ab/d9489/--------------2016-10-29---12-57-42.png\"\n        srcset=\"/static/08fdfbfc10f3ccf6e1df8a23a29fa0ab/12f09/--------------2016-10-29---12-57-42.png 148w,\n/static/08fdfbfc10f3ccf6e1df8a23a29fa0ab/d9489/--------------2016-10-29---12-57-42.png 258w\"\n        sizes=\"(max-width: 258px) 100vw, 258px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>If you do so your framework will compile perfectly fine, other Swift code in the framework will have access to Objective-C code defined in imported header because compiler will generate appropriate Swift code.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4083f624ab952b287c21dee41edd5923/e85cb/--------------2016-10-29---12-14-00.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 6.081081081081082%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQElEQVR42j3LMQ6AMAwEQf7/Rwoq7LtYhAjXi2ioR7Nd48ESEYFk5rwpLZRBZCKbKnN6sR/GCpQiP5Ox/d/u5gXbyEr+c9Sr+wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"              2016 10 29   12 14 00\"\n        title=\"\"\n        src=\"/static/4083f624ab952b287c21dee41edd5923/e85cb/--------------2016-10-29---12-14-00.png\"\n        srcset=\"/static/4083f624ab952b287c21dee41edd5923/12f09/--------------2016-10-29---12-14-00.png 148w,\n/static/4083f624ab952b287c21dee41edd5923/e4a3f/--------------2016-10-29---12-14-00.png 295w,\n/static/4083f624ab952b287c21dee41edd5923/e85cb/--------------2016-10-29---12-14-00.png 480w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token class-name\">Foundation</span>\n<span class=\"token keyword\">import</span> <span class=\"token class-name\">UIKit</span>\n<span class=\"token keyword\">import</span> <span class=\"token class-name\">UIKitExtensions</span>\n\n<span class=\"token keyword\">extension</span> <span class=\"token class-name\">UIView</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token keyword\">func</span> <span class=\"token function-definition function\">appearanceWhenContainedWithin</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">:</span> <span class=\"token class-name\">AnyObject</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">Type</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token keyword\">Self</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>But don't completely trust it. This will work for <strong>most</strong> cases but <strong>not for all</strong>.</p>\n<h3>The problem</h3>\n<p>As the project grows up we always come to the situations when default <code>Debug</code> and <code>Release</code> configurations are not enough. We start to add something like <code>Debug Production</code> and <code>Debug Staging</code> and maybe more. That's when things become trickier.</p>\n<p>Also when dealing with frameworks you can setup your project in different ways. Here is an <a href=\"https://blog.automatic.com/xcode-can-handle-your-scale-speeding-up-your-workflow-with-prebuilt-frameworks-f7c6e4499545#.vrvulec9u\">article</a> that describes one of such setups. I don't use exactly the same, but a similar approach. I have a separate project for all the frameworks. Then I have a simple build script that copies framework from build products directory to <code>Frameworks</code> directory. Then I add this directory in \"Frameworks search paths\" and embed the framework in the app.</p>\n<p>So based on that let's say we have our <em>framework target defined in a separate project</em> and instead of <code>Debug</code> configuration we have <em><code>Debug Production</code></em>.</p>\n<p>If you build the app for <code>Debug Production</code> configuration and you have enabled option \"Find Implicit Dependencies\" in build schema (it's enabled by default) Xcode will first try to build framework for this configuration. But as there is no such configuration in framework project it will fallback to default, which turns out to be <code>Release</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d61a4ac4e2955f8d4d09b79fd316ad36/e0885/--------------2016-10-29---14-54-07.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.864864864864865%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAw0lEQVR42lXFwU7CMACA4b3/o8gNse065mQBJuJYu27FgMLYCIkXIjHBGE1+IjcPX76gF/a4zV4Qzx03/Sf60iJjj9AV4axD+RP6T/1B6I5odyT2J9L1+Z/R+ou8PRPY7pNoatFjw11qkGN3pSYOOXGoaXVdZh6RvyIXb2izZeh2RHZHVDZEtkEVW2arPcHvzzfLxwT3EOJGijKRmFhgE4EZDjD3gjIeUKSaeZHh3BxX5dS+oPYLNs2S/WFD0644vLdcAI8mzHGwWe1rAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"              2016 10 29   14 54 07\"\n        title=\"\"\n        src=\"/static/d61a4ac4e2955f8d4d09b79fd316ad36/fcda8/--------------2016-10-29---14-54-07.png\"\n        srcset=\"/static/d61a4ac4e2955f8d4d09b79fd316ad36/12f09/--------------2016-10-29---14-54-07.png 148w,\n/static/d61a4ac4e2955f8d4d09b79fd316ad36/e4a3f/--------------2016-10-29---14-54-07.png 295w,\n/static/d61a4ac4e2955f8d4d09b79fd316ad36/fcda8/--------------2016-10-29---14-54-07.png 590w,\n/static/d61a4ac4e2955f8d4d09b79fd316ad36/efc66/--------------2016-10-29---14-54-07.png 885w,\n/static/d61a4ac4e2955f8d4d09b79fd316ad36/e0885/--------------2016-10-29---14-54-07.png 918w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>But the app target will be built normally for <code>Debug Production</code> configuration:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a28f923f4cf3468436d2196f31be65ae/59000/--------------2016-10-29---14-59-53.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.864864864864865%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtklEQVR42m2I22rCQBgG8/5PI6ghGi9K6ykJthdL26BmN/qvUVPoTSWb7YEphFz6wcA3E3yUb+hihzkcsFVFXRq+9jtupeam9zTVCec9rm1xvqVxrvv+23NvgWsbtttX8lxRFDkna5Cj7il6eheDiEas4XgW5GKxF8Febef1Z03w9/uDWj6QxWOyOCSdhqyiIdksJI1D1tGIZDLq2nw8II2GrGYT5usFj8snkk2Celc8qxe0GP4BKQzXmi8QfSoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"              2016 10 29   14 59 53\"\n        title=\"\"\n        src=\"/static/a28f923f4cf3468436d2196f31be65ae/fcda8/--------------2016-10-29---14-59-53.png\"\n        srcset=\"/static/a28f923f4cf3468436d2196f31be65ae/12f09/--------------2016-10-29---14-59-53.png 148w,\n/static/a28f923f4cf3468436d2196f31be65ae/e4a3f/--------------2016-10-29---14-59-53.png 295w,\n/static/a28f923f4cf3468436d2196f31be65ae/fcda8/--------------2016-10-29---14-59-53.png 590w,\n/static/a28f923f4cf3468436d2196f31be65ae/efc66/--------------2016-10-29---14-59-53.png 885w,\n/static/a28f923f4cf3468436d2196f31be65ae/59000/--------------2016-10-29---14-59-53.png 917w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>That all will create build products at different paths, and apparently cause the error:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3613b9eb7487d6d06514b62f014236ec/59822/--------------2016-10-29---15-02-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.108108108108105%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABHklEQVR42oWR227DIBBE+f/Pq/rQVkmaeG18AVyCwZiLPZVpEuWhalc60rBCw2hgdPpARTU45+i6DsYYzPMM5xy890XvLMvy0Ps+pYTfhr0f3lBVhKbh5eK6rggxIoSAGGPhfn7e7YY5Z2zbVoziV4cwGbAvqTC0Lbq2hewHjELCaI24LAh7MucQvP8xuZnFpwe2dS2G2QhE58DCQOg/TxiohiAq9OczJBHGYYDqe4xCQGuNqzEl2Z7qzmNumo28AR0OuByPaC8XdFUFwTmsUnDXK+ZpwmxtqWPv8ZmS8GaU7YjkZ7CkWiiqIHmLkXPIhkPUddFaSOg9nVTls6y1yHnFX8Oa1xfUROBE0EqVzvw0wU8GIQaknBBjenT3H9/nsRtyQugA8AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"              2016 10 29   15 02 02\"\n        title=\"\"\n        src=\"/static/3613b9eb7487d6d06514b62f014236ec/fcda8/--------------2016-10-29---15-02-02.png\"\n        srcset=\"/static/3613b9eb7487d6d06514b62f014236ec/12f09/--------------2016-10-29---15-02-02.png 148w,\n/static/3613b9eb7487d6d06514b62f014236ec/e4a3f/--------------2016-10-29---15-02-02.png 295w,\n/static/3613b9eb7487d6d06514b62f014236ec/fcda8/--------------2016-10-29---15-02-02.png 590w,\n/static/3613b9eb7487d6d06514b62f014236ec/efc66/--------------2016-10-29---15-02-02.png 885w,\n/static/3613b9eb7487d6d06514b62f014236ec/59822/--------------2016-10-29---15-02-02.png 916w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>In fact it will be even worse because it will fail to compile only from clean state. If you build an app target again after failure without cleaning derived data folder it <em>will</em> compile. It's very easy not to notice that when you are building locally and then you will only see these errors on a build machine where typically build is done from clean state.</p>\n<p>That's all will make you (me) wonder what a hell is going on, trying to look at performed build steps, blaming parallelize building, blaming custom configurations and Xcode, blaming Apple and the whole universe for making your life so miserable.</p>\n<h3>The solution</h3>\n<p>Turns out there are several ways to solve the issue.</p>\n<p>First option is <strong>not to use a separate project for the framework target</strong> and include it in the app target's project. That will make both the app and the framework targets to share configurations, build products will be placed at the same path and there will be no linking errors. This approach though can make Xcode slower because it will need to index all source files, both from the app and from the framework.</p>\n<p>If you still need to use a separate project for the framework you have two options left.</p>\n<p>One is not to use custom build configurations or to create the same build configurations in framework project. The actual build settings does not matter, just configurations should be named the same. That's clearly not the best solution because you simply may not need these configurations for the framework. Or you may need to use completely different configurations there. Then it will probably not work at all. But that's one of the easiest way to make your app to build. And think if you can to replace build settings with environment variables and arguments.</p>\n<p>The last option is to use custom module map and import Objective-C headers there instead of umbrella header. That will make them available from Swift code both in the framework and in the target that links to that framework. And it's very easy to do. You can find the default module map generated by Xcode inside the framework. It will look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">framework module UIKitExtensions {\n    umbrella header \"UIKitExtensions.h\"\n\n    export *\n    module * { export * }\n}\n\nmodule UIKitExtensions.Swift {\n    header \"UIKitExtensions-Swift.h\"\n}</code></pre></div>\n<p><code>UIKitExtensions.Swift</code> module will be always generated by Xcode so we don't need to include it in our custom module map. All we need to do is to import Objective-C header in <code>UIKitExtension</code> module (don't forget to remove it from umbrella header):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">framework module UIKitExtensions {\n    umbrella header \"UIKitExtensions.h\"\n    header \"UIAppearance+Swift.h\"\n\n    export *\n    module * { export * }\n}</code></pre></div>\n<p>Then set the path to module map file in Build Settings fo the framework:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/616882c939dbb0cbbf3be246e5fef2d1/38cea/--------------2016-10-29---16-12-20.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 11.486486486486488%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAYElEQVR42mWOzQqAMAyD9/7vKFMv/nTVOgayOhtxB0ENfDklIS6lBCLCKgJVxV9WXXcBjw22LSHGiJxz5dtxIoK+6+F9ixACSikwsxe3Ds2YpwFEoR5g5prnZYGd5zN4ATPSmzv01ZXtAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"              2016 10 29   16 12 20\"\n        title=\"\"\n        src=\"/static/616882c939dbb0cbbf3be246e5fef2d1/fcda8/--------------2016-10-29---16-12-20.png\"\n        srcset=\"/static/616882c939dbb0cbbf3be246e5fef2d1/12f09/--------------2016-10-29---16-12-20.png 148w,\n/static/616882c939dbb0cbbf3be246e5fef2d1/e4a3f/--------------2016-10-29---16-12-20.png 295w,\n/static/616882c939dbb0cbbf3be246e5fef2d1/fcda8/--------------2016-10-29---16-12-20.png 590w,\n/static/616882c939dbb0cbbf3be246e5fef2d1/38cea/--------------2016-10-29---16-12-20.png 678w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>With that when you try to build your target from clean state there will be no error any more.</p>\n<p>Though this solution works I'm not entirely sure that it's a correct use of module maps. <a href=\"http://nsomar.com/modular-framework-creating-and-using-them/\">Here</a> is a good starting guide on that matter.</p>\n<p>And <a href=\"https://github.com/ilyapuchka/MixedFramework\">here</a> is a demo project that demonstrates the original issue and solves it with custom module map. Please feel free to correct any of my statements and prove that I'm doing something wrong here and the problem is in some other build settings, project setup or something else. Or that there is a much better solution to this problem.</p>","fields":{"slug":"/objective-c-headers-in-swift-framework-custom-build-configurations/"},"frontmatter":{"id":"5b6f5a3a9d28c70f0f015f7c","title":"Objective-C headers in Swift framework & custom build configurations","date":"October 29, 2016","description":"It's already 2 years of Swift and its interoperability with Objective-C as well. When app extensions were released we've got a way to share our code across targets using frameworks. I used to build lots of frameworks since then, sometimes I even worked full-time just on frameworks. But as I had written almost none of Objective-C in around a year now and I've never dived deep enough in Swift and Objective-C interoperability in frameworks here is the lesson I had to learn hard this time.","tags":""}},"previous":{"excerpt":"One of the strategies that we use at HelloFresh to reduce compile time, improve code reuse and overall codebase health is breaking our code into frameworks. We…","fields":{"slug":"/frameworks-keychain-nscoding-and-swift/"},"frontmatter":{"title":"Frameworks, Keychain, NSCoding and Swift","date":"September 30, 2016"}},"next":{"excerpt":"Every app has some kind of caching. Let's say our caching strategy is very simple: check if data is in the memory cache and return it if not - make a network…","fields":{"slug":"/inout-variables-with-side-effects/"},"frontmatter":{"title":"Inout variables with side effects","date":"December 15, 2016"}}},"pageContext":{"id":"faf9eed4-e0f2-58cf-a074-2f6a765f769d","previousPostId":"c244eb3c-a623-5c7b-88d6-1bbaaa889803","nextPostId":"89f247bd-b520-5556-a3ca-b965aafc31d7"}},"staticQueryHashes":["2355076697","2841359383"],"slicesMap":{}}